<HTML>

<HEAD>
  <TITLE>Digital Therapist</TITLE>
  <SCRIPT LANGUAGE="JavaScript" TYPE="text/javascript" SRC="elizabot.js"></SCRIPT>
  <SCRIPT LANGUAGE="JavaScript" TYPE="text/javascript" SRC="elizadata.js"></SCRIPT>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
 <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1">
  <SCRIPT LANGUAGE="JavaScript" TYPE="text/javascript">

    var eliza = new ElizaBot();
    var elizaLines = new Array();

    var displayCols = 60;
    var displayRows = 20;

    function elizaReset() {
      eliza.reset();
      elizaLines.length = 0;
      elizaStep();
    }

    function elizaStep() {
      var f = document.forms.e_form;
      var userinput = f.e_input.value;
      if (eliza.quit) {
        f.e_input.value = '';
        if (confirm("This session is over.\nStart over?")) elizaReset();
        f.e_input.focus();
        return;
      }
      else if (userinput != '') {
        var usr = userinput;
        var rpl = String.fromCodePoint(0x1F916) + eliza.transform(userinput);
        elizaLines.push(usr);
        elizaLines.push(rpl);
        f.e_display.value = elizaLines.join('\n');
      }
      else if (elizaLines.length == 0) {
        // no input and no saved lines -> output initial
        var initial = String.fromCodePoint(0x1F916) + eliza.getInitial();
        elizaLines.push(initial);
        f.e_display.value = initial + '\n';
      }
      f.e_input.value = '';
      f.e_input.focus();
    }

//-->
  </SCRIPT>
</HEAD>

<BODY onload="window.setTimeout('elizaReset()',100)">

  <FORM NAME="e_form" onsubmit="elizaStep();return false">
    <TEXTAREA readonly="true" NAME="e_display"></TEXTAREA>
    <INPUT placeholder="Enter responses here" TYPE="text" NAME="e_input">
    </TR>
  </FORM>

</BODY>

<style>
  body {
    overflow: hidden;
  }

  textarea {
    background-color: #fefae0;
    color: #283618;
    width: 100vw;
    height: calc(100vh - 40px);
  }

  input {
    width: 100vw;
    height: 40px;
  }
</style>

</HTML>
